require(settings.get("ghu.base").."core/apis/ghu")local a;if arg[1]~=nil then if arg[1]=="term"then a=term else a=peripheral.wrap(arg[1])end else a=term end;local b=require("am.ui")local c,d=a.getSize()local e=0;local f=b.UILoop()local g=b.Screen(a,{textColor=colors.white,backgroundColor=colors.black})g:add(b.Frame(b.a.TopLeft(),{width=math.floor(c/2),fillVertical=true,fillColor=colors.lightGray,id="leftFrame"}))local h=b.Frame(b.a.TopRight(),{width=math.floor(c/2),fillVertical=true,id="rightFrame"})h.borderColor=nil;h:add(b.Text(b.a.Top(),"Event"))h:add(b.Text(b.a.Center(2),"",{id="eventText"}))h:add(b.Text(b.a.Center(3),"",{id="eventArgsText"}))local i=b.Button(b.a.Center(8),string.format("Disabled (%d)",e),{fillColor=colors.blue,disabled=true,id="disabledButton"})h:add(i)local j=b.Button(b.a.Center(5,b.c.Offset.Left),"Add",{fillColor=colors.green,id="addButton"})j:addActivateHandler(function(k,l)e=e+1;i:updateLabel(l,string.format("Disabled (%d)",e))end)h:add(j)local m=b.Button(b.a.Center(5,b.c.Offset.Right),"Remove",{fillColor=colors.yellow,textColor=colors.black,id="removeButton"})m:addActivateHandler(function(k,l)e=math.max(0,e-1)i:updateLabel(l,string.format("Disabled (%d)",e))end)h:add(m)local n=b.Button(b.a.Bottom(),"Exit",{id="exitButton",fillColor=colors.red})n:addActivateHandler(function()f:cancel()end)h:add(n)g:add(h)local function o()g:render()f:run(g)end;local function p()while f.running do local q=os.startTimer(5)local r={os.pullEvent()}if b.c.l.Events.UI[r[1]]then local s=g:get("eventText")local t=g:get("eventArgsText")if r[1]==b.c.e.Events.loop_cancel then s:update(r[1])t:update("")elseif r[1]==b.c.e.Events.button_activate then s:update(r[1])t:update(string.format("%s: %s",r[2].objId,r[2].touch))elseif r[1]==b.c.e.Events.button_deactivate then s:update(r[1])t:update(r[2].objId)elseif r[1]~=b.c.e.Events.text_update then local u=r[2]s:update(r[1])t:update(string.format("%s: %d, %d",u.objId,u.x,u.y))end end;os.cancelTimer(q)end end;parallel.waitForAll(o,p)a.clear()a.setCursorPos(1,1)
